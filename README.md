# API Сервис поиска ближайших машин для перевозки грузов.

# Запуск:
- Создать файл .env в корне проекта, скопировать переменные из env.example и поменять на корректные значения.
- Из корня проекта запустить команду "docker-compose up --build".
- Проект будет доступен по адресу http://127.0.0.1:8000 .

# Особенности:
- При запуске проекта с помощью кастомных django-команд добавляются все локации из файла "uszips.csv", создаются 20 машин с рандомной привязкой к добавленным локациям.
- При запуске проекта создается Celery-task, который каждые 3 минуты рандомно обновляет локацию для каждой машины в базе данных.
- Используется фильтрация для грузов на основе указанного радиуса или веса груза.

# Endpoints:
- http://127.0.0.1:8000/swagger - Swagger документация.
- http://127.0.0.1:8000/api/cargo/create/ - создание груза. POST запрос. На вход принимает json формата {"pick_up": zip-код локации, "delivery": zip-код локации, "weight": int(вес груза), "description": "описание"}.
- http://127.0.0.1:8000/api/cargo/all - получение всех грузов и список ближайших машин для каждого груза. GET запрос. Так же есть возможность фильтрации через необязательные query params: radius= int число для изменения радиуса поиска машин, weight = int число для фильтрации груза до определенного веса. Работают как вместе, так и по-отдельности.
- http://127.0.0.1:8000/api/cargo/{cargo_id}/ - получение груза по ID и список ближайших машин для этого груза. GET запрос.
- http://127.0.0.1:8000/api/car/update/{car_id}/ - обновление данных машины по ID. PATCH запрос. Принимает на вход json офрмата {"zip": zip-код локации}.
- http://127.0.0.1:8000/api/cargo/update/{cargo_id}/ - обновление данных груза по ID. PATCH запрос. Принимает на вход json офрмата {"weight": int(вес груза), "description": "описание"}. Все поля необязательные.
- http://127.0.0.1:8000/api/cargo/delete/{car_id}/ - удаляет груз по ID.
